<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - GST Invoice System</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Navigation - SIMPLIFIED: No dropdown, no PANESAR SANITARY -->
    <nav class="navbar">
        <a href="dashboard.html" class="logo">
            <div class="logo-icon">
                <i class="fas fa-receipt"></i>
            </div>
            GST Invoice System
        </a>
        <div class="nav-links">
            <a href="dashboard.html" class="nav-link active">
                <i class="fas fa-chart-bar"></i> Dashboard
            </a>
            <a href="shop.html" class="nav-link">
                <i class="fas fa-store"></i> Shop Profile
            </a>
            <a href="inventory.html" class="nav-link">
                <i class="fas fa-boxes"></i> Inventory
            </a>
            <a href="create_invoice.html" class="nav-link">
                <i class="fas fa-file-invoice"></i> Create Invoice
            </a>
            <a href="invoices.html" class="nav-link">
                <i class="fas fa-list"></i> Invoices
            </a>
            <a href="add_purchase.html" class="nav-link">
                <i class="fas fa-cart-plus"></i> Add Purchase
            </a>
            <a href="settings.html" class="nav-link">
                <i class="fas fa-cog"></i> Settings
            </a>
            <label class="theme-switch">
                <input type="checkbox" id="darkModeToggle">
                <span class="slider"></span>
            </label>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1>
                <i class="fas fa-chart-line"></i>
                Dashboard Overview
            </h1>
            <div class="page-header-actions">
                <div class="form-group" style="margin: 0;">
                    <select class="form-control" id="periodSelect">
                        <option value="today">Today</option>
                        <option value="week" selected>This Week</option>
                        <option value="month">This Month</option>
                        <option value="year">This Year</option>
                    </select>
                </div>
                <button class="btn btn-primary" id="refreshBtn">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-file-invoice-dollar"></i>
                </div>
                <div class="stat-value text-primary" id="totalInvoices">0</div>
                <div class="stat-label">Total Invoices</div>
                <div class="stat-change text-success">
                    <i class="fas fa-arrow-up"></i> 12% from last week
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-rupee-sign"></i>
                </div>
                <div class="stat-value text-success" id="totalRevenue">₹0</div>
                <div class="stat-label">Total Revenue</div>
                <div class="stat-change text-success">
                    <i class="fas fa-arrow-up"></i> 8% from last week
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-percentage"></i>
                </div>
                <div class="stat-value text-info" id="totalGST">₹0</div>
                <div class="stat-label">GST Collected</div>
                <div class="stat-change text-success">
                    <i class="fas fa-arrow-up"></i> 15% from last week
                </div>
            </div>
        </div>

        <!-- Quick Stats Row -->
        <div class="stats-grid" style="margin-top: 20px;">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-box"></i>
                </div>
                <div class="stat-value" id="totalProducts">0</div>
                <div class="stat-label">Total Products</div>
                <div class="stat-change text-success">
                    <i class="fas fa-arrow-up"></i> 5 new this week
                </div>
            </div>
            
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <div class="stat-value" id="monthPurchases">0</div>
                <div class="stat-label">This Month Purchases</div>
                <div class="stat-change text-info">
                    <i class="fas fa-chart-line"></i> View in Add Purchase
                </div>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <i class="fas fa-chart-bar"></i>
                    Revenue Overview
                </h2>
                <div class="d-flex align-center gap-3">
                    <button class="btn btn-sm btn-secondary" id="revenueChartBtn">Monthly</button>
                    <button class="btn btn-sm btn-secondary" id="quarterlyChartBtn">Quarterly</button>
                    <button class="btn btn-sm btn-primary" id="yearlyChartBtn">Yearly</button>
                </div>
            </div>
            <div class="chart-container" style="height: 300px; padding: 20px;">
                <canvas id="revenueChart"></canvas>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <i class="fas fa-history"></i>
                    Recent Invoices
                </h2>
                <a href="invoices.html" class="btn btn-primary btn-sm">
                    <i class="fas fa-eye"></i> View All
                </a>
            </div>
            <div class="table-container">
                <table class="table" id="recentInvoicesTable">
                    <thead>
                        <tr>
                            <th>Invoice No.</th>
                            <th>Customer</th>
                            <th>Date</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="recentInvoicesBody">
                        <!-- Recent invoices will be loaded here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Quick Access Cards -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <i class="fas fa-bolt"></i>
                    Quick Access
                </h2>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <button class="btn btn-success w-full" onclick="window.location.href='create_invoice.html'">
                        <i class="fas fa-plus-circle"></i> Create New Invoice
                    </button>
                </div>
                <div class="form-group">
                    <button class="btn btn-primary w-full" onclick="window.location.href='add_purchase.html'">
                        <i class="fas fa-cart-plus"></i> Add Purchase
                    </button>
                </div>
                <div class="form-group">
                    <button class="btn btn-info w-full" onclick="window.location.href='inventory.html'">
                        <i class="fas fa-box"></i> Manage Inventory
                    </button>
                </div>
            </div>
            
            <div class="form-row" style="margin-top: 15px;">
                <div class="form-group">
                    <button class="btn btn-secondary w-full" onclick="window.location.href='shop.html'">
                        <i class="fas fa-store"></i> Shop Profile
                    </button>
                </div>
                <div class="form-group">
                    <button class="btn btn-secondary w-full" onclick="window.location.href='settings.html'">
                        <i class="fas fa-cog"></i> Settings
                    </button>
                </div>
                <div class="form-group">
                    <button class="btn btn-secondary w-full" onclick="window.print()">
                        <i class="fas fa-print"></i> Print Dashboard
                    </button>
                </div>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="card">
            <div class="card-header">
                <h2 class="card-title">
                    <i class="fas fa-history"></i>
                    Recent Activity
                </h2>
                <button class="btn btn-sm btn-secondary" onclick="loadRecentActivity()">
                    <i class="fas fa-sync-alt"></i> Refresh
                </button>
            </div>
            <div class="activity-feed" id="activityFeed">
                <div class="activity-item">
                    <div class="activity-icon success">
                        <i class="fas fa-file-invoice"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Invoice Created</div>
                        <div class="activity-desc">New invoice INV-2024-001 created for ABC Technologies</div>
                        <div class="activity-time">2 hours ago</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon info">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Product Added</div>
                        <div class="activity-desc">New product "Wireless Mouse" added to inventory</div>
                        <div class="activity-time">4 hours ago</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon warning">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Return Processed</div>
                        <div class="activity-desc">Return processed for invoice INV-2023-045</div>
                        <div class="activity-time">1 day ago</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon primary">
                        <i class="fas fa-cart-plus"></i>
                    </div>
                    <div class="activity-content">
                        <div class="activity-title">Purchase Recorded</div>
                        <div class="activity-desc">Stock added for "USB-C Cable" (50 units)</div>
                        <div class="activity-time">2 days ago</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <p>© 2024 GST Invoice System. All rights reserved.</p>
    </div>

    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Your external scripts -->
    <script src="script.js"></script>
    <script src="github-storage.js"></script>

    <!-- Prevent script.js from modifying the navigation -->
    <script>
        // Override the updateNavigation function to keep the static navigation
        window.updateNavigation = function() {
            // Just initialize dark mode, don't modify navigation
            const darkModeToggle = document.getElementById('darkModeToggle');
            if (!darkModeToggle) return;
            
            const isDarkMode = localStorage.getItem('darkMode') === 'true';
            const userPrefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            
            if (isDarkMode || (!isDarkMode && userPrefersDark && localStorage.getItem('darkMode') === null)) {
                document.body.classList.add('dark-mode');
                darkModeToggle.checked = true;
            }
            
            darkModeToggle.addEventListener('change', function() {
                if (this.checked) {
                    document.body.classList.add('dark-mode');
                    localStorage.setItem('darkMode', 'true');
                } else {
                    document.body.classList.remove('dark-mode');
                    localStorage.setItem('darkMode', 'false');
                }
            });
        };
    </script>
</body>
</html>
